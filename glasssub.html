<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The Loop | Submit Glass</title>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; font-family:"Segoe UI", Arial, sans-serif; }
    body { background:#f9f9f9; color:#222; }

    /* Navbar */
    .navbar { display:flex; justify-content:space-between; align-items:center; padding:15px 40px; background:#fff; border-bottom:2px solid #5de116; position:sticky; top:0; z-index:1000; }
    .logo-section { display:flex; align-items:center; gap:12px; font-weight:bold; font-size:18px; color:#333; }
    .logo { width:48px; height:48px; border-radius:50%; background:#5de116; display:flex; align-items:center; justify-content:center; color:#fff; font-size:14px; font-weight:bold; box-shadow:0px 3px 6px rgba(0,0,0,0.15); }
    .nav-links { display:flex; gap:18px; }
    .nav-links a { text-decoration:none; color:#1a1acd; border:1px solid #1a1acd; padding:8px 18px; border-radius:25px; font-size:14px; font-weight:500; transition:all 0.3s ease; box-shadow:0px 2px 5px rgba(0,0,0,0.1); }
    .nav-links a:hover { background:#f01111; color:#fff; border-color:#f01111; transform:translateY(-2px); }

    /* Hero */
    .hero { background:linear-gradient(to right, #5de116, #1a1acd); color:white; text-align:center; padding:80px 20px; border-radius:6px; margin:18px 0; border-bottom:2px solid #5de116; }
    .hero h1 { font-size:36px; margin-bottom:15px; }
    .hero p { font-size:18px; max-width:700px; margin:auto; }

    /* Form Card */
    .card { max-width:700px; background:#fff; padding:25px; border-radius:12px; box-shadow:0px 6px 18px rgba(0,0,0,0.08); margin:30px auto; }
    .card h2 { color:#1a1acd; margin-bottom:12px; }
    form { display:flex; flex-direction:column; gap:12px; }
    label { font-size:13px; color:#555; }

    input[type="text"], input[type="email"], input[type="number"], select, textarea, input[type="date"] {
      width:100%; padding:12px; border-radius:8px; border:1px solid #ccc; font-size:15px; color:#222;
    }

    textarea { min-height:90px; resize:vertical }

    .row { display:flex; gap:10px }
    .row .col{ flex:1 }

    .btn{ padding:10px 16px; border-radius:8px; font-weight:700; cursor:pointer; border:none }
    .btn-primary{ background:#1a1acd; color:#fff }
    .btn-primary:hover{ background:#f01111 }
    .btn-ghost{ background:transparent; border:1px solid #1a1acd; color:#1a1acd }

    .info { padding:10px; border-radius:8px; background:#f3f3f3; color:#444; margin-top:12px }
    .cash { color:#5de116; font-weight:800 }

    footer{ margin-top:26px; text-align:center; color:#555; padding:12px 0; }

    /* Calendar and form improvements */
    input[type="date"] {
      position: relative;
      cursor: pointer;
      background: #fff url('data:image/svg+xml,%3Csvg fill="%23333" height="20" viewBox="0 0 24 24" width="20" xmlns="http://www.w3.org/2000/svg"%3E%3Cpath d="M0 0h24v24H0V0z" fill="none"/%3E%3Cpath d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.89-1.99 2L3 21c0 1.11.89 2 2 2h14c1.11 0 2-.89 2-2V5c0-1.11-.89-2-2-2zm0 18H5V8h14v13z"/%3E%3Cpath d="M0 0h24v24H0z" fill="none"/%3E%3C/svg%3E') no-repeat right 10px center;
      background-size: 20px 20px;
    }

    @media (max-width:860px){ 
      .row{ flex-direction:column } 
      .hero{ text-align:center } 
    }
  </style>
</head>
<body>

  <!-- Navbar -->
  <div class="navbar">
    <div class="logo-section">
      <div class="logo">L</div>
      <span>The Loop</span>
    </div>
    <div class="nav-links">
      <a href="index.html">Home</a>
      <a href="services.html">Services</a>
      <a href="glasssub.html">Glass Submission</a>
      <a href="feedback.html">Feedback</a>
    </div>
  </div>

  <!-- Hero -->
  <div class="hero">
    <h1>Submit Broken Glass for Cash</h1>
    <p>Enter a few details to calculate your cash. After checking the amount, provide pickup details so we can collect your glass.</p>
    <div class="info">Rate: <strong class="cash">₹10 / kg</strong> — Transparent process, safe handling.</div>
  </div>

  <!-- Form Card -->
  <div class="card" role="region" aria-labelledby="quickFormTitle">
    <h2 id="quickFormTitle">Quick Submission</h2>
    <form id="glassForm" autocomplete="on">
      <div class="row">
        <div class="col">
          <label for="name">Name</label>
          <input id="name" name="name" type="text" placeholder="Your name" required />
        </div>
        <div class="col">
          <label for="email">Email</label>
          <input id="email" name="email" type="email" placeholder="you@example.com" required />
        </div>
      </div>

      <div>
        <label for="weight">Weight (kg)</label>
        <input id="weight" name="weight" type="number" step="0.1" min="0" placeholder="e.g. 3.5" required />
      </div>

      <div>
        <label for="pickupDate">Preferred Pickup Date</label>
        <input type="date" id="pickupDate" name="pickupDate" placeholder="Select a date" />
      </div>

      <div style="display:flex;gap:10px;align-items:center;justify-content:space-between;margin-top:6px">
        <button class="btn btn-primary" type="submit">Check Cash</button>
        <button id="openDetailedForm" class="btn btn-ghost" type="button" style="display:none">Provide Pickup Details</button>
      </div>

      <div id="cashMessage" class="info" role="status" aria-live="polite" style="display:none"></div>
    </form>

    <form id="detailedForm" style="display:none;margin-top:14px" aria-hidden="true">
      <h3 style="margin:0 0 10px 0;color:#555;font-size:15px">Pickup Details</h3>
      <label for="phone">Phone</label>
      <input id="phone" name="phone" type="text" placeholder="Phone number" pattern="[0-9+\-() ]{6,}" />

      <label for="address">Address</label>
      <input id="address" name="address" type="text" placeholder="Pickup address" />

      <label for="glassType">Glass Type</label>
      <select id="glassType" name="glassType">
        <option value="">Select type (optional)</option>
        <option value="bottle">Bottle</option>
        <option value="window">Window</option>
        <option value="mirror">Mirror</option>
        <option value="other">Other</option>
      </select>

      <label for="notes">Notes</label>
      <textarea id="notes" name="notes" placeholder="Any special instructions (optional)"></textarea>

      <div style="display:flex;gap:10px;margin-top:8px">
        <button class="btn btn-primary" id="submitDetails" type="button">Submit Details</button>
        <button class="btn btn-ghost" id="cancelDetails" type="button">Cancel</button>
      </div>
    </form>
  </div>

  <footer>© <strong>The Loop</strong> — Glass Pickup & Recycling</footer>

  <script>
    const glassForm = document.getElementById('glassForm');
    const cashMessage = document.getElementById('cashMessage');
    const openDetailedFormBtn = document.getElementById('openDetailedForm');
    const detailedForm = document.getElementById('detailedForm');
    const submitDetailsBtn = document.getElementById('submitDetails');
    const cancelDetailsBtn = document.getElementById('cancelDetails');
    const ratePerKg = 10;

    function showCashMessage(html){
      cashMessage.innerHTML = html;
      cashMessage.style.display = 'block';
    }

    glassForm.addEventListener('submit', (e)=>{
      e.preventDefault();
      const name = document.getElementById('name').value.trim();
      const email = document.getElementById('email').value.trim();
      const weight = parseFloat(document.getElementById('weight').value);

      if(!name || !email || !(weight > 0)){
        showCashMessage('Please provide valid name, email, and weight.');
        openDetailedFormBtn.style.display = 'none';
        return;
      }

      const cashEarned = (weight * ratePerKg).toFixed(2);
      showCashMessage(`Hi <strong>${escapeHtml(name)}</strong>, you will earn <span class="cash">₹${cashEarned}</span> for <strong>${weight} kg</strong>.`);
      openDetailedFormBtn.style.display = 'inline-block';
    });

    openDetailedFormBtn.addEventListener('click', ()=>{
      detailedForm.style.display = 'block';
      detailedForm.setAttribute('aria-hidden','false');
      openDetailedFormBtn.style.display = 'none';
    });

    cancelDetailsBtn.addEventListener('click', ()=>{
      detailedForm.style.display = 'none';
      detailedForm.setAttribute('aria-hidden','true');
      openDetailedFormBtn.style.display = 'inline-block';
    });

    submitDetailsBtn.addEventListener('click', ()=>{
      const data = {
        name: document.getElementById('name').value.trim(),
        email: document.getElementById('email').value.trim(),
        weight: parseFloat(document.getElementById('weight').value) || 0,
        pickupDate: document.getElementById('pickupDate').value,
        phone: document.getElementById('phone').value.trim(),
        address: document.getElementById('address').value.trim(),
        glassType: document.getElementById('glassType').value,
        notes: document.getElementById('notes').value.trim()
      };

      if(!data.name || !data.email || !(data.weight > 0)){
        showCashMessage('Please complete the quick submission first and ensure values are valid.');
        return;
      }

      console.log('Submitting pickup details', data);
      showCashMessage('Thank you! Your details have been submitted. We will contact you shortly.');
      glassForm.reset();
      detailedForm.reset();
      detailedForm.style.display = 'none';
      detailedForm.setAttribute('aria-hidden','true');
      openDetailedFormBtn.style.display = 'none';
    });

    function escapeHtml(str){
      return String(str).replace(/[&<>"']/g, function(m){return {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m];});
    }
  </script>
</body>
</html>
